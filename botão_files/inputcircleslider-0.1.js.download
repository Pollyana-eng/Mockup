!function(l){l.fn.iCircleSlider=function(t){var s=jQuery.extend({id:"",dialwidth:50,degbound:45},t);return this.each(function(){s.id="#"+this.id;var e=l(s.id).val(),o=l(s.id).offset(),r=l(s.id).outerHeight(),d={x:0,y:0},n={x:0,state:!1},i=!1,c={r:1,a:d.x,o:d.y,theta:0};l(s.id).on("click",function(t){if(0==i){e=l(s.id).val(),e=s.degbound*Math.round(e/s.degbound),o=l(s.id).offset(),r=l(s.id).outerHeight();var a=l("<div class='circlecontainer' ></div>").css({top:o.top+r,left:o.left,position:"absolute"}).append("<div id='dial_0'>0</div><div id='dial_90'>90</div><div id='dial_180'>180</div><div id='dial_270'>270</div><div id='r_pt'></div><div id='dial'><div id='dial_l' >&nbsp;</div></div>");l("body").append(a),a.attr("unselectable","on").css("UserSelect","none").css("MozUserSelect","none"),calct=180-e,l("#dial").css({transform:"rotate("+calct+"deg)","-ms-transform":"rotate("+calct+"deg)","-webkit-transform":"rotate("+calct+"deg)","-o-transform":"rotate("+calct+"deg)","-moz-transform":"rotate("+calct+"deg)"}),a.mousedown(function(t){var a=l("#r_pt").offset();c.a=a.left-d.x,c.o=a.top-d.y,c.theta=Math.round(Math.atan2(c.o,c.a)*(180/Math.PI)),l("#dial").css({transform:"rotate("+c.theta+"deg)","-ms-transform":"rotate("+c.theta+"deg)","-webkit-transform":"rotate("+c.theta+"deg)","-o-transform":"rotate("+c.theta+"deg)","-moz-transform":"rotate("+c.theta+"deg)"}),c.theta=s.degbound*Math.round(c.theta/s.degbound),calct=180-c.theta,l(s.id).val(calct).change(),n.state=!0,t.preventDefault()}).mouseup(function(t){t.stopPropagation(),n.state=!1}),i=!0}return!1}).on("keyup",function(){return 1==i&&(calct=180-l(s.id).val(),l("#dial").css({transform:"rotate("+calct+"deg)","-ms-transform":"rotate("+calct+"deg)","-webkit-transform":"rotate("+calct+"deg)","-o-transform":"rotate("+calct+"deg)","-moz-transform":"rotate("+calct+"deg)"})),!1}),l(document).mousemove(function(t){if(1==i&&(d.x=t.pageX,d.y=t.pageY,n.state)){var a=l("#r_pt").offset();c.a=a.left-d.x,c.o=a.top-d.y,c.theta=Math.round(Math.atan2(c.o,c.a)*(180/Math.PI)),l("#dial").css({transform:"rotate("+c.theta+"deg)","-ms-transform":"rotate("+c.theta+"deg)","-webkit-transform":"rotate("+c.theta+"deg)","-o-transform":"rotate("+c.theta+"deg)","-moz-transform":"rotate("+c.theta+"deg)"}),c.theta=s.degbound*Math.round(c.theta/s.degbound),calct=180-c.theta,l(s.id).val(calct).change()}}).mouseup(function(t){(n.state=!1,i)&&(i=!1,l(".circlecontainer").remove())})})}}(jQuery);